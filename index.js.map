{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./index.ts","webpack:///./src/arrays.ts","webpack:///./src/json-parse.ts","webpack:///./src/keygen.ts","webpack:///./src/numbers.ts","webpack:///./src/promise_queue.ts","webpack:///./src/resolvable-promise.ts","webpack:///./src/retry-with-delay.ts","webpack:///./src/strings.ts","webpack:///external \"crypto\"","webpack:///external \"p-queue\""],"names":[],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(global, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading wasm modules\n \tvar installedWasmModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// object with all compiled WebAssembly.Modules\n \t__webpack_require__.w = {};\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","\nexport {JsonParse} from './src/json-parse';\nexport {Keygen} from './src/keygen';\nexport {Numbers} from './src/numbers';\nexport {PromiseQueue} from './src/promise_queue';\nexport {ResolvablePromise} from './src/resolvable-promise';\nexport {RetryWithDelay} from './src/retry-with-delay';\nexport {Arrays} from './src/arrays';\nexport {Strings} from './src/strings';\n","export class Arrays {\n\n  public static deduplicate<T>(array: Array<T>, isEqual: (a: T, b: T) => boolean): Array<T> {\n    const uniques: Array<T> = [];\n    array.forEach(val => {\n      let found = false;\n      for (let ii=0; ii<uniques.length; ii+=1) {\n        if (isEqual(val, uniques[ii])) {\n          found = true;\n          break;\n        }\n      }\n      if (!found) {\n        uniques.push(val);\n      }\n    });\n    return uniques;\n  }\n\n\n\n}\n","export class JsonParse {\n  /**\n   * Simple wrapper of JSON.parse so it can be included in promise chains.\n   * @param jsonString\n   * @returns {*}\n   */\n  public static parse(jsonString: string) {\n    return new Promise((resolve, reject) => {\n      try {\n        const json = JSON.parse(jsonString);\n        resolve(json);\n      } catch (err) {\n        reject(err);\n      }\n    });\n\n\n\n  }\n\n\n  public static parseIntArrayFromJsonString(param: string): Array<number> {\n    if (!param) {\n      return [];\n    }\n    return param.split(',').map(id => parseInt(id, 10)).filter(id => !isNaN(id));\n  }\n}\n","/**\n * @module Keygen\n */\n\nimport * as crypto from 'crypto'\n\nexport class Keygen {\n  /**\n   * Return a unique identifier with the given `len`.\n   *\n   *     utils.uid(10);\n   *     // => \"FDaS435D2z\"\n   *\n   * @param {Number} len\n   * @return {String}\n   * @api private\n   */\n  public static uid(len: number): string {\n    const buf = []\n    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'\n    const length = chars.length\n\n    for (let i = 0; i < len; ++i) {\n      buf.push(chars[getRandomInt(0, length - 1)])\n    }\n\n    return buf.join('')\n  }\n\n  /**\n   * Create a HMAC using SHA512\n   *\n   * @param {String} key - encryption key\n   * @param {String} message - message to be encrypted\n   * @return {String} encrypted HMAC\n   */\n  public static hmacSHA512(key: string, message: string): Promise<string> {\n    return new Promise((resolve, reject) => {\n      if (!message) {\n        reject('hmacSHA512 input message was null or undefined.')\n      } else if (!key) {\n        reject('hmacSHA512 input key was null or undefined.')\n      } else {\n        const buf = new Buffer(key, 'utf-8')\n        const hash = crypto.createHmac('sha512', buf)\n        hash.update(new Buffer(message, 'utf-8'))\n        resolve(hash.digest('hex'))\n      }\n    })\n  }\n}\n\n/**\n * Return a random int between min and max inclusive.\n *\n * @param {Number} min\n * @param {Number} max\n * @return {Number}\n * @api private\n */\n\nfunction getRandomInt(min: number, max: number) {\n  return Math.floor(Math.random() * (max - min + 1)) + min\n}\n","export class Numbers {\n  /**\n   * Determine if the input is a numeric type\n   *\n   * @param n {Object} anything\n   * @returns {boolean}\n   */\n  public static isNumber = (n: any) => {\n    return !isNaN(parseFloat(n)) && isFinite(n);\n  };\n\n\n  public static roundFloat(value: number, numDecimals: number) {\n    return Number(Math.round(value+'e'+numDecimals as any)+'e-'+numDecimals);\n  }\n\n  public static zeroPad(numberValue: number, minDigits: number): string {\n    const desiredDigits = Math.round(minDigits);\n\n    let stringValue = '' + numberValue;\n\n    if (desiredDigits > 0) {\n      let numDigits = Math.ceil(Math.log10(Math.floor(numberValue) + 0.000001));\n\n      while (numDigits < desiredDigits) {\n        stringValue = '0' + stringValue;\n        numDigits += 1;\n      }\n\n    }\n\n    return stringValue;\n  }\n\n}\n","import {ResolvablePromise} from './resolvable-promise';\n\nimport * as PQueue from 'p-queue';\n\nexport class PromiseQueue {\n\n  private queue: PQueue;\n\n  private pendingPromise: ResolvablePromise<any> | null = null;\n\n  constructor(maxConcurrent?: number){\n    this.queue = new PQueue({concurrency: maxConcurrent || 1});\n  }\n\n  public add(promiseFunction: () => Promise<any>): Promise<any> {\n    return this.queue.add(promiseFunction);\n  }\n\n  public clear(resolvedResult: any): void {\n    if (this.pendingPromise){\n      this.queue.clear();\n      this.pendingPromise.resolve(resolvedResult);\n    } else {\n      throw new Error('Promise queue clear must be used with runAllPromiseFunctionsCancellable');\n    }\n  }\n\n  public runAllPromiseFunctionsCancellable<T>(promiseFunctions: Array<() => Promise<T>>): Promise<Array<T>> {\n    if (!promiseFunctions) {\n      return Promise.reject('promiseFunctions was not supplied');\n    } else if (promiseFunctions.length === 0) {\n      return Promise.resolve([]);\n    } else {\n      promiseFunctions.forEach(promiseFunction => {\n        this.pendingPromise = new ResolvablePromise<any>(this.add(promiseFunction));\n      });\n      return this.pendingPromise ? this.pendingPromise.promise : Promise.resolve();\n    }\n  }\n\n  public runAllPromiseFunctions<T>(promiseFunctions: Array<() => Promise<T>>): Promise<Array<T>> {\n    this.pendingPromise = null;\n    if (!promiseFunctions) {\n      return Promise.reject('promiseFunctions was not supplied');\n    } else if (promiseFunctions.length === 0) {\n      return Promise.resolve([]);\n    } else {\n      const addedPromises: Array<Promise<any>> = [];\n      promiseFunctions.forEach(promiseFunction => {\n        addedPromises.push(this.add(promiseFunction));\n      });\n\n      return new Promise((resolve, reject) => {\n        Promise.all(addedPromises)\n        .then(results => {\n          resolve(results);\n        })\n        .catch(err => {\n          reject(err);\n        });\n      });\n    }\n  }\n\n}\n\n","export class ResolvablePromise<T> {\n\n  public promise: Promise<T>;\n\n  constructor(promise: Promise<T>){\n\n    this.promise = new Promise((resolve, reject) => {\n\n      this.resolve = resolve;\n      this.reject = reject;\n\n      promise\n      .then(result => {\n        resolve(result);\n      })\n      .catch(err => {\n        reject(err);\n      });\n    });\n  }\n  \n  public resolve: (value?: T | PromiseLike<T>) => void = () => null;\n  public reject: (reason?: any) => void = () => null;\n\n  // public promise(): Promise<T> {\n  //   return new Promise();\n  // }\n}\n","import {PromiseQueue} from './promise_queue';\n\nexport class RetryWithDelay {\n\n  public static retry(promiseFunction: (retryNumber: number) => Promise<any>, numRetries: number, delayMs: number): Promise<any> {\n\n    const queue = new PromiseQueue(1);\n\n    const promiseFunctions = [];\n\n    for (let ii=0; ii<numRetries; ii++){\n      promiseFunctions.push(this.retryFunction(promiseFunction, delayMs, queue, ii, ii === numRetries - 1));\n    }\n\n    return queue.runAllPromiseFunctionsCancellable(promiseFunctions)\n    .then(results => {\n      // console.log('All promise functions complete: ' + JSON.stringify(results));\n      return Promise.resolve(results);\n    });\n  }\n\n  private static retryFunction(promiseFunction: (retryNumber: number) => Promise<any>, delayMs: number, queue: PromiseQueue, retryIndex: number, isLastInQueue: boolean): () => Promise<any> {\n    return () => {\n      return promiseFunction(retryIndex)\n      .then(result => {\n        // SUCCESS, CANCEL SUBSEQUENT EXECUTION\n        // console.log('Success: ' + result);\n        queue.clear(result);\n        return Promise.resolve(result);\n      })\n      .catch(err => {\n        // This one errored out, skip to next execution unless this was the last retry\n        if (isLastInQueue){\n          // console.log('Failed, is last one so rejecting.');\n          return Promise.reject(err);\n        } else {\n          // console.log('Failed, delaying and retrying.');\n          return this.delayPromise(delayMs);\n        }\n      });\n    };\n  }\n\n  private static delayPromise(ms: number){\n    return new Promise(resolve => {\n      setTimeout(resolve, ms);\n    });\n  }\n\n}\n","export class Strings {\n\n\n  public static sanitizeEmail(email: string) {\n\n    return email.toLowerCase().replace(/ /g,'');\n  }\n}\n","module.exports = require(\"crypto\");","module.exports = require(\"p-queue\");"],"sourceRoot":""}